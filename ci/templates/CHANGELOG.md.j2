# CHANGELOG
{%- if context.history.unreleased | length > 0 -%}
{# UNRELEASED #}
## *Unreleased*
{%  for type_, commits in context.history.unreleased | dictsort %}
### {{ type_ | capitalize }}
{%    for commit in commits %}{%
        if type_ != "unknown" %}
* {{ commit.message.rstrip() }} ([`{{ commit.short_hash }}`]({{ commit.hexsha | commit_hash_url }}))
{%      else %}
* {{ commit.message.rstrip() }} ([`{{ commit.short_hash }}`]({{ commit.hexsha | commit_hash_url }}))
{%      endif %}{%
      endfor %}{%
    endfor %}{%
endif %}
{% for version, release in context.history.released.items() -%}
{%  if release["elements"].keys() | reject("==", "chore") | list() | length() -%}
{# RELEASED #}
## {{ version.as_semver_tag() }} ({{ release.tagged_date.strftime("%Y-%m-%d") }})
{%    for type_, commits in release["elements"] | dictsort %}{%
        if type_ != "chore" %}
### {{ type_ | replace("unknown", "general") | capitalize }}
{%        for commit in commits %}
* {{ commit.message.splitlines()[0].rstrip() }} ([`{{ commit.short_hash }}`]({{ commit.hexsha | commit_hash_url }}))
{%        endfor %}{%
        endif %}{%
      endfor -%}{%-
    endif -%}{%-
   endfor -%}